<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èµ›åšæœ‹å…‹è™šæ‹Ÿæ“ä½œç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }

        body {
            background: #0a160a;
            color: #00ff00;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* æ‰«æçº¿æ•ˆæœ */
        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(transparent 50%, rgba(0, 255, 0, 0.03) 50%);
            background-size: 100% 4px;
            z-index: 100;
            pointer-events: none;
        }

        /* ç½‘æ ¼èƒŒæ™¯ */
        .grid-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 255, 0, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 0, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            z-index: -1;
        }

        /* æ¡Œé¢ */
        .desktop {
            height: calc(100vh - 60px);
            padding: 20px;
            display: flex;
            flex-wrap: wrap;
            align-content: flex-start;
            position: relative;
        }

        /* æ¡Œé¢å›¾æ ‡ */
        .icon {
            width: 80px;
            height: 90px;
            margin: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .icon:hover {
            transform: scale(1.1);
            text-shadow: 0 0 10px #00ff00;
        }

        .icon-img {
            width: 50px;
            height: 50px;
            margin: 0 auto 5px;
            background: rgba(0, 255, 0, 0.2);
            border: 1px solid #00ff00;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .icon-label {
            font-size: 12px;
            color: #00ff00;
            text-shadow: 0 0 5px #00ff00;
        }

        /* ä»»åŠ¡æ  */
        .taskbar {
            height: 60px;
            background: rgba(10, 22, 10, 0.8);
            border-top: 1px solid #00ff00;
            display: flex;
            align-items: center;
            padding: 0 10px;
            position: relative;
            z-index: 10;
            box-shadow: 0 -5px 20px rgba(0, 255, 0, 0.2);
        }

        .start-button {
            padding: 8px 15px;
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            color: #00ff00;
            cursor: pointer;
            margin-right: 15px;
            border-radius: 3px;
            transition: all 0.2s;
        }

        .start-button:hover {
            background: rgba(0, 255, 0, 0.2);
            box-shadow: 0 0 10px #00ff00;
        }

        .taskbar-apps {
            display: flex;
            flex-grow: 1;
        }

        .taskbar-app {
            padding: 8px 15px;
            margin-right: 5px;
            background: rgba(0, 255, 0, 0.05);
            border: 1px solid transparent;
            border-radius: 3px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .taskbar-app.active {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            box-shadow: 0 0 5px #00ff00;
        }

        .taskbar-app:hover {
            background: rgba(0, 255, 0, 0.1);
        }

        .system-tray {
            display: flex;
            align-items: center;
        }

        .time {
            margin-left: 15px;
            font-size: 14px;
            color: #00ff00;
            text-shadow: 0 0 5px #00ff00;
        }

        /* çª—å£ */
        .window {
            position: absolute;
            background: rgba(10, 22, 10, 0.9);
            border: 1px solid #00ff00;
            border-radius: 5px;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
            min-width: 300px;
            min-height: 200px;
            display: none;
            z-index: 5;
            top: 50px;
            left: 50px;
        }

        .window.active {
            display: block;
        }

        .window-header {
            padding: 8px 10px;
            background: rgba(0, 255, 0, 0.1);
            border-bottom: 1px solid #00ff00;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
        }

        .window-title {
            font-size: 14px;
            font-weight: bold;
        }

        .window-controls {
            display: flex;
        }

        .window-control {
            width: 20px;
            height: 20px;
            margin-left: 5px;
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 12px;
        }

        .window-control:hover {
            background: rgba(0, 255, 0, 0.2);
        }

        .window-control.close:hover {
            background: rgba(255, 0, 0, 0.5);
        }

        .window-content {
            padding: 15px;
            height: calc(100% - 40px);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* åº”ç”¨å†…å®¹ */
        .app-content {
            color: #00ff00;
        }

        .app-content h2 {
            margin-bottom: 15px;
            text-shadow: 0 0 5px #00ff00;
        }

        .app-content p {
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .file-list {
            list-style: none;
        }

        .file-list li {
            padding: 5px 0;
            border-bottom: 1px solid rgba(0, 255, 0, 0.2);
            cursor: pointer;
        }

        .file-list li:hover {
            background: rgba(0, 255, 0, 0.1);
        }

        /* ç»ˆç«¯æ ·å¼ */
        .terminal {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid #00ff00;
            padding: 10px;
            font-family: 'Courier New', monospace;
            flex: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .terminal-line {
            margin-bottom: 5px;
            font-size: 12px;
        }

        .terminal-prompt {
            color: #00ff00;
        }

        .terminal-input {
            background: transparent;
            border: none;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            width: calc(100% - 20px);
            outline: none;
        }

        /* DOSSåŠ©æ‰‹æ ·å¼ - ä¿®å¤æ»šåŠ¨é—®é¢˜ */
        .doss-terminal {
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid #00ff00;
            padding: 10px;
            font-family: 'Courier New', monospace;
            flex: 1;
            overflow-y: auto;
            display: block;
            height: 100%;
        }

        .doss-line {
            margin-bottom: 5px;
            font-size: 11px;
            color: #00ff00;
            text-shadow: 0 0 5px #00ff00;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .doss-header {
            color: #00ff00;
            text-shadow: 0 0 5px #00ff00;
            margin-bottom: 10px;
            font-weight: bold;
        }

        /* è¿›åº¦æ¡æ ·å¼ */
        .progress-container {
            margin: 15px 0;
            display: none;
        }

        .progress-title {
            font-size: 14px;
            margin-bottom: 5px;
            color: #00ff00;
            text-shadow: 0 0 5px #00ff00;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            border-radius: 3px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #00aa00, #00ff00);
            transition: width 0.1s linear;
            box-shadow: 0 0 10px #00ff00;
        }

        .progress-text {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #000;
            font-weight: bold;
        }

        /* éœ“è™¹æ–‡å­—æ•ˆæœ */
        .neon-text {
            text-shadow: 
                0 0 5px #00ff00,
                0 0 10px #00ff00,
                0 0 15px #00ff00,
                0 0 20px #00ff00;
        }

        /* è„‰å†²åŠ¨ç”» */
        @keyframes pulse {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }

        .pulse {
            animation: pulse 2s infinite;
        }
        
        /* å…³é—­çª—å£åŠ¨ç”» */
        @keyframes closeWindow {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(0.1); opacity: 0; }
        }
        
        .closing {
            animation: closeWindow 0.2s forwards;
        }
    </style>
</head>
<body>
    <div class="grid-bg"></div>
    
    <div class="desktop" id="desktop">
        <!-- æ¡Œé¢å›¾æ ‡ -->
        <div class="icon" data-app="file-explorer">
            <div class="icon-img">ğŸ“</div>
            <div class="icon-label">æ–‡ä»¶ç®¡ç†å™¨</div>
        </div>
        <div class="icon" data-app="terminal">
            <div class="icon-img">âŒ¨ï¸</div>
            <div class="icon-label">ç»ˆç«¯</div>
        </div>
        <div class="icon" data-app="doss-assistant">
            <div class="icon-img">âš¡</div>
            <div class="icon-label">DOSS_ASSISTANT</div>
        </div>
        <div class="icon" data-app="browser">
            <div class="icon-img">ğŸŒ</div>
            <div class="icon-label">ç½‘ç»œæµè§ˆå™¨</div>
        </div>
        <div class="icon" data-app="settings">
            <div class="icon-img">âš™ï¸</div>
            <div class="icon-label">ç³»ç»Ÿè®¾ç½®</div>
        </div>
        <div class="icon" data-app="media">
            <div class="icon-img">ğŸµ</div>
            <div class="icon-label">åª’ä½“æ’­æ”¾å™¨</div>
        </div>
        
        <!-- åº”ç”¨çª—å£ -->
        <div class="window" id="file-explorer-window">
            <div class="window-header">
                <div class="window-title">æ–‡ä»¶ç®¡ç†å™¨</div>
                <div class="window-controls">
                    <div class="window-control minimize">_</div>
                    <div class="window-control maximize">â–¡</div>
                    <div class="window-control close">Ã—</div>
                </div>
            </div>
            <div class="window-content">
                <div class="app-content">
                    <h2>ç³»ç»Ÿæ–‡ä»¶</h2>
                    <ul class="file-list">
                        <li>ç³»ç»Ÿæ—¥å¿—</li>
                        <li>ç”¨æˆ·æ–‡æ¡£</li>
                        <li>ç¨‹åºæ–‡ä»¶</li>
                        <li>ç½‘ç»œé…ç½®</li>
                        <li>å®‰å…¨åè®®</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="window" id="terminal-window">
            <div class="window-header">
                <div class="window-title">ç»ˆç«¯ - root@cyber-system</div>
                <div class="window-controls">
                    <div class="window-control minimize">_</div>
                    <div class="window-control maximize">â–¡</div>
                    <div class="window-control close">Ã—</div>
                </div>
            </div>
            <div class="window-content">
                <div class="terminal" id="terminal-content">
                    <div class="terminal-line"><span class="terminal-prompt">root@cyber-system:~$</span> system status</div>
                    <div class="terminal-line">ç³»ç»Ÿæ ¸å¿ƒ: è¿è¡Œæ­£å¸¸</div>
                    <div class="terminal-line">ç½‘ç»œè¿æ¥: å·²åŠ å¯†</div>
                    <div class="terminal-line">å®‰å…¨åè®®: æ¿€æ´»</div>
                    <div class="terminal-line">å†…å­˜ä½¿ç”¨: 42%</div>
                    <div class="terminal-line"><span class="terminal-prompt">root@cyber-system:~$</span> <input type="text" class="terminal-input" id="terminal-input" placeholder="è¾“å…¥å‘½ä»¤..."></div>
                    
                    <!-- è¿›åº¦æ¡å®¹å™¨ -->
                    <div class="progress-container" id="progress-container">
                        <div class="progress-title">æ­£åœ¨è·å–IPæƒé™</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                            <div class="progress-text" id="progress-text">0%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- DOSSåŠ©æ‰‹çª—å£ -->
        <div class="window" id="doss-assistant-window">
            <div class="window-header">
                <div class="window-title">DOSS_ASSISTANT - æ”»å‡»æ¨¡å¼</div>
                <div class="window-controls">
                    <div class="window-control minimize">_</div>
                    <div class="window-control maximize">â–¡</div>
                    <div class="window-control close">Ã—</div>
                </div>
            </div>
            <div class="window-content">
                <div class="doss-terminal" id="doss-terminal-content">
                    <div class="doss-header">DOSS_ASSISTANT v2.1 - æ­£åœ¨è¿è¡Œ...</div>
                    <!-- å†…å®¹å°†åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
        
        <div class="window" id="browser-window">
            <div class="window-header">
                <div class="window-title">ç½‘ç»œæµè§ˆå™¨ - èµ›åšç½‘ç»œ</div>
                <div class="window-controls">
                    <div class="window-control minimize">_</div>
                    <div class="window-control maximize">â–¡</div>
                    <div class="window-control close">Ã—</div>
                </div>
            </div>
            <div class="window-content">
                <div class="app-content">
                    <h2>èµ›åšç½‘ç»œ</h2>
                    <p>è¿æ¥åˆ°å…¨çƒæ•°æ®ç½‘ç»œ...</p>
                    <p>åŠ å¯†è¿æ¥å·²å»ºç«‹</p>
                    <p>è®¿é—®æƒé™: ç­‰çº§3</p>
                    <p>æ•°æ®æµ: ç¨³å®š</p>
                </div>
            </div>
        </div>
        
        <div class="window" id="settings-window">
            <div class="window-header">
                <div class="window-title">ç³»ç»Ÿè®¾ç½®</div>
                <div class="window-controls">
                    <div class="window-control minimize">_</div>
                    <div class="window-control maximize">â–¡</div>
                    <div class="window-control close">Ã—</div>
                </div>
            </div>
            <div class="window-content">
                <div class="app-content">
                    <h2>ç³»ç»Ÿé…ç½®</h2>
                    <p>ç•Œé¢ä¸»é¢˜: èµ›åšæœ‹å…‹</p>
                    <p>å®‰å…¨çº§åˆ«: é«˜</p>
                    <p>ç½‘ç»œåè®®: IPv6</p>
                    <p>æ•°æ®åŠ å¯†: AES-256</p>
                </div>
            </div>
        </div>
        
        <div class="window" id="media-window">
            <div class="window-header">
                <div class="window-title">åª’ä½“æ’­æ”¾å™¨</div>
                <div class="window-controls">
                    <div class="window-control minimize">_</div>
                    <div class="window-control maximize">â–¡</div>
                    <div class="window-control close">Ã—</div>
                </div>
            </div>
            <div class="window-content">
                <div class="app-content">
                    <h2>éŸ³é¢‘æµ</h2>
                    <p>å½“å‰æ’­æ”¾: èµ›åšéŸ³è½¨ #7</p>
                    <p>æ ¼å¼: æ•°å­—éŸ³é¢‘</p>
                    <p>æ¯”ç‰¹ç‡: 320 kbps</p>
                    <p>çŠ¶æ€: æ’­æ”¾ä¸­</p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="taskbar">
        <div class="start-button">å¼€å§‹</div>
        <div class="taskbar-apps" id="taskbar-apps">
            <!-- ä»»åŠ¡æ åº”ç”¨å°†åŠ¨æ€æ·»åŠ  -->
        </div>
        <div class="system-tray">
            <div class="time" id="time">00:00:00</div>
        </div>
    </div>

    <script>
        // æ›´æ–°ç³»ç»Ÿæ—¶é—´
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString();
            document.getElementById('time').textContent = timeString;
        }
        
        setInterval(updateTime, 1000);
        updateTime();

        // çª—å£ç®¡ç†
        let activeWindow = null;
        let zIndex = 5;
        let closedWindows = new Set(); // è·Ÿè¸ªå·²å…³é—­çš„çª—å£
        let dossInterval = null; // DOSSåŠ©æ‰‹è¾“å‡ºé—´éš”
        
        // æ¡Œé¢å›¾æ ‡ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.icon').forEach(icon => {
            icon.addEventListener('click', function() {
                const appName = this.getAttribute('data-app');
                openWindow(appName);
            });
        });
        
        // æ‰“å¼€çª—å£å‡½æ•°
        function openWindow(appName) {
            // å¦‚æœçª—å£å·²å…³é—­ï¼Œéœ€è¦é‡æ–°åˆå§‹åŒ–
            if (closedWindows.has(appName)) {
                closedWindows.delete(appName);
            }
            
            const window = document.getElementById(`${appName}-window`);
            
            // é‡ç½®çª—å£çŠ¶æ€
            window.classList.remove('closing');
            window.style.display = 'block';
            window.classList.add('active');
            zIndex++;
            window.style.zIndex = zIndex;
            activeWindow = window;
            
            // æ·»åŠ åˆ°ä»»åŠ¡æ 
            addToTaskbar(appName, window);
            
            // çª—å£æ‹–åŠ¨åŠŸèƒ½
            makeWindowDraggable(window);
            
            // å¦‚æœæ˜¯ç»ˆç«¯çª—å£ï¼Œèšç„¦è¾“å…¥æ¡†
            if (appName === 'terminal') {
                setTimeout(() => {
                    const terminalInput = document.getElementById('terminal-input');
                    if (terminalInput) {
                        terminalInput.focus();
                    }
                }, 100);
            }
            
            // å¦‚æœæ˜¯DOSSåŠ©æ‰‹çª—å£ï¼Œå¯åŠ¨è¾“å‡º
            if (appName === 'doss-assistant') {
                startDossOutput();
            }
        }
        
        // æ·»åŠ åˆ°ä»»åŠ¡æ 
        function addToTaskbar(appName, window) {
            const taskbarApps = document.getElementById('taskbar-apps');
            const appId = `taskbar-${appName}`;
            
            // å¦‚æœåº”ç”¨å·²ç»åœ¨ä»»åŠ¡æ ï¼Œåˆ™æ¿€æ´»å®ƒ
            let existingApp = document.getElementById(appId);
            if (existingApp) {
                document.querySelectorAll('.taskbar-app').forEach(app => {
                    app.classList.remove('active');
                });
                existingApp.classList.add('active');
                return;
            }
            
            // å¦åˆ™åˆ›å»ºæ–°çš„ä»»åŠ¡æ åº”ç”¨
            const appElement = document.createElement('div');
            appElement.id = appId;
            appElement.className = 'taskbar-app';
            appElement.textContent = getAppDisplayName(appName);
            
            appElement.addEventListener('click', function() {
                // å¦‚æœçª—å£å·²å…³é—­ï¼Œä¸è¦å°è¯•æ¿€æ´»å®ƒ
                if (closedWindows.has(appName)) {
                    return;
                }
                
                // åˆ‡æ¢çª—å£æ˜¾ç¤ºçŠ¶æ€
                if (window.classList.contains('active')) {
                    window.classList.remove('active');
                    this.classList.remove('active');
                    
                    // å¦‚æœæ˜¯DOSSåŠ©æ‰‹çª—å£ï¼Œåœæ­¢è¾“å‡º
                    if (appName === 'doss-assistant') {
                        stopDossOutput();
                    }
                } else {
                    // å…³é—­å…¶ä»–çª—å£
                    document.querySelectorAll('.window.active').forEach(win => {
                        win.classList.remove('active');
                    });
                    document.querySelectorAll('.taskbar-app.active').forEach(app => {
                        app.classList.remove('active');
                    });
                    
                    window.classList.add('active');
                    this.classList.add('active');
                    zIndex++;
                    window.style.zIndex = zIndex;
                    activeWindow = window;
                    
                    // å¦‚æœæ˜¯ç»ˆç«¯çª—å£ï¼Œèšç„¦è¾“å…¥æ¡†
                    if (appName === 'terminal') {
                        setTimeout(() => {
                            const terminalInput = document.getElementById('terminal-input');
                            if (terminalInput) {
                                terminalInput.focus();
                            }
                        }, 100);
                    }
                    
                    // å¦‚æœæ˜¯DOSSåŠ©æ‰‹çª—å£ï¼Œå¯åŠ¨è¾“å‡º
                    if (appName === 'doss-assistant') {
                        startDossOutput();
                    }
                }
            });
            
            taskbarApps.appendChild(appElement);
            appElement.classList.add('active');
        }
        
        // è·å–åº”ç”¨æ˜¾ç¤ºåç§°
        function getAppDisplayName(appName) {
            const names = {
                'file-explorer': 'æ–‡ä»¶ç®¡ç†å™¨',
                'terminal': 'ç»ˆç«¯',
                'doss-assistant': 'DOSS_ASSISTANT',
                'browser': 'æµè§ˆå™¨',
                'settings': 'è®¾ç½®',
                'media': 'åª’ä½“æ’­æ”¾å™¨'
            };
            return names[appName] || appName;
        }
        
        // çª—å£æ‹–åŠ¨åŠŸèƒ½
        function makeWindowDraggable(window) {
            const header = window.querySelector('.window-header');
            let isDragging = false;
            let currentX;
            let currentY;
            let initialX;
            let initialY;
            let xOffset = 0;
            let yOffset = 0;
            
            header.addEventListener("mousedown", dragStart);
            document.addEventListener("mousemove", drag);
            document.addEventListener("mouseup", dragEnd);
            
            function dragStart(e) {
                initialX = e.clientX - xOffset;
                initialY = e.clientY - yOffset;
                
                if (e.target === header || header.contains(e.target)) {
                    isDragging = true;
                    
                    // å°†çª—å£ç½®äºæœ€å‰
                    zIndex++;
                    window.style.zIndex = zIndex;
                    activeWindow = window;
                    
                    // æ›´æ–°ä»»åŠ¡æ çŠ¶æ€
                    document.querySelectorAll('.taskbar-app').forEach(app => {
                        app.classList.remove('active');
                    });
                    const appName = window.id.replace('-window', '');
                    const taskbarApp = document.getElementById(`taskbar-${appName}`);
                    if (taskbarApp) {
                        taskbarApp.classList.add('active');
                    }
                }
            }
            
            function drag(e) {
                if (isDragging) {
                    e.preventDefault();
                    currentX = e.clientX - initialX;
                    currentY = e.clientY - initialY;
                    
                    xOffset = currentX;
                    yOffset = currentY;
                    
                    setTranslate(currentX, currentY, window);
                }
            }
            
            function setTranslate(xPos, yPos, el) {
                el.style.transform = "translate3d(" + xPos + "px, " + yPos + "px, 0)";
            }
            
            function dragEnd(e) {
                initialX = currentX;
                initialY = currentY;
                isDragging = false;
            }
        }
        
        // çª—å£æ§åˆ¶æŒ‰é’®åŠŸèƒ½
        document.querySelectorAll('.window-control').forEach(control => {
            control.addEventListener('click', function() {
                const window = this.closest('.window');
                const appName = window.id.replace('-window', '');
                const taskbarApp = document.getElementById(`taskbar-${appName}`);
                
                if (this.classList.contains('minimize')) {
                    window.classList.remove('active');
                    if (taskbarApp) {
                        taskbarApp.classList.remove('active');
                    }
                    
                    // å¦‚æœæ˜¯DOSSåŠ©æ‰‹çª—å£ï¼Œåœæ­¢è¾“å‡º
                    if (appName === 'doss-assistant') {
                        stopDossOutput();
                    }
                } else if (this.classList.contains('maximize')) {
                    if (window.style.width === '90vw' && window.style.height === '80vh') {
                        window.style.width = '';
                        window.style.height = '';
                        window.style.top = '';
                        window.style.left = '';
                        window.style.transform = '';
                    } else {
                        window.style.width = '90vw';
                        window.style.height = '80vh';
                        window.style.top = '5%';
                        window.style.left = '5%';
                        window.style.transform = 'translate3d(0, 0, 0)';
                    }
                } else if (this.classList.contains('close')) {
                    // æ·»åŠ å…³é—­åŠ¨ç”»
                    window.classList.add('closing');
                    
                    // æ ‡è®°çª—å£ä¸ºå·²å…³é—­
                    closedWindows.add(appName);
                    
                    // å¦‚æœæ˜¯DOSSåŠ©æ‰‹çª—å£ï¼Œåœæ­¢è¾“å‡º
                    if (appName === 'doss-assistant') {
                        stopDossOutput();
                    }
                    
                    // åŠ¨ç”»ç»“æŸåå…³é—­çª—å£
                    setTimeout(() => {
                        window.classList.remove('active');
                        window.classList.remove('closing');
                        window.style.display = 'none';
                        if (taskbarApp) {
                            taskbarApp.remove();
                        }
                    }, 200);
                }
            });
        });
        
        // å¼€å§‹æŒ‰é’®åŠŸèƒ½
        document.querySelector('.start-button').addEventListener('click', function() {
            alert('ç³»ç»Ÿèœå• - å¼€å‘ä¸­');
        });
        
        // ç»ˆç«¯åŠŸèƒ½å¢å¼º
        const terminalInput = document.getElementById('terminal-input');
        const terminalContent = document.getElementById('terminal-content');
        const progressContainer = document.getElementById('progress-container');
        const progressFill = document.getElementById('progress-fill');
        const progressText = document.getElementById('progress-text');
        
        // åˆå§‹åŒ–ç»ˆç«¯è¾“å…¥å¤„ç†
        function initTerminal() {
            terminalInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    const command = this.value.trim();
                    this.value = '';
                    
                    // æ·»åŠ ç”¨æˆ·è¾“å…¥åˆ°ç»ˆç«¯
                    const userInputLine = document.createElement('div');
                    userInputLine.className = 'terminal-line';
                    userInputLine.innerHTML = `<span class="terminal-prompt">root@cyber-system:~$</span> ${command}`;
                    terminalContent.appendChild(userInputLine);
                    
                    // å¤„ç†ç‰¹æ®Šå‘½ä»¤
                    if (command === 'doss 127.0.0.1 /s') {
                        startHackingProgress();
                    } else if (command === 'help') {
                        const helpLine = document.createElement('div');
                        helpLine.className = 'terminal-line';
                        helpLine.textContent = 'å¯ç”¨å‘½ä»¤: help, doss 127.0.0.1 /s, clear';
                        terminalContent.appendChild(helpLine);
                    } else if (command === 'clear') {
                        // æ¸…é™¤ç»ˆç«¯å†…å®¹ï¼Œä½†ä¿ç•™è¾“å…¥è¡Œ
                        const lines = terminalContent.querySelectorAll('.terminal-line');
                        for (let i = 0; i < lines.length - 1; i++) {
                            if (lines[i].querySelector('.terminal-prompt')) {
                                lines[i].remove();
                            }
                        }
                        // éšè—è¿›åº¦æ¡
                        progressContainer.style.display = 'none';
                    } else if (command) {
                        // æ·»åŠ é»˜è®¤å“åº”
                        const responseLine = document.createElement('div');
                        responseLine.className = 'terminal-line';
                        responseLine.textContent = `å‘½ä»¤æœªæ‰¾åˆ°: ${command}`;
                        terminalContent.appendChild(responseLine);
                    }
                    
                    // æ»šåŠ¨åˆ°åº•éƒ¨
                    setTimeout(() => {
                        terminalContent.scrollTop = terminalContent.scrollHeight;
                    }, 10);
                }
            });
        }
        
        // å¯åŠ¨é»‘å®¢è¿›åº¦æ¡
        function startHackingProgress() {
            // æ˜¾ç¤ºè¿›åº¦æ¡
            progressContainer.style.display = 'block';
            
            // é‡ç½®è¿›åº¦
            progressFill.style.width = '0%';
            progressText.textContent = '0%';
            
            // æ·»åŠ å¼€å§‹æ¶ˆæ¯
            const startLine = document.createElement('div');
            startLine.className = 'terminal-line';
            startLine.textContent = 'å¯åŠ¨DOSSæ”»å‡»åè®®... ç›®æ ‡: 127.0.0.1';
            terminalContent.appendChild(startLine);
            
            // æ¨¡æ‹Ÿè¿›åº¦
            let progress = 0;
            const interval = setInterval(() => {
                progress += 1;
                progressFill.style.width = `${progress}%`;
                progressText.textContent = `${progress}%`;
                
                // æ·»åŠ ä¸€äº›éšæœºçš„é»‘å®¢æ¶ˆæ¯
                if (progress % 20 === 0) {
                    const messages = [
                        'æ­£åœ¨ç»•è¿‡é˜²ç«å¢™...',
                        'ç ´è§£åŠ å¯†åè®®...',
                        'è·å–ç®¡ç†å‘˜æƒé™...',
                        'æ³¨å…¥ç³»ç»Ÿæ¼æ´...',
                        'å»ºç«‹åå‘è¿æ¥...'
                    ];
                    const randomMsg = messages[Math.floor(Math.random() * messages.length)];
                    const msgLine = document.createElement('div');
                    msgLine.className = 'terminal-line';
                    msgLine.textContent = randomMsg;
                    terminalContent.appendChild(msgLine);
                    setTimeout(() => {
                        terminalContent.scrollTop = terminalContent.scrollHeight;
                    }, 10);
                }
                
                if (progress >= 100) {
                    clearInterval(interval);
                    
                    // è¿›åº¦å®Œæˆåæ·»åŠ å®Œæˆæ¶ˆæ¯
                    setTimeout(() => {
                        const successLine = document.createElement('div');
                        successLine.className = 'terminal-line';
                        successLine.textContent = 'IPæƒé™è·å–æˆåŠŸï¼ç³»ç»Ÿå·²å®Œå…¨æ§åˆ¶ã€‚';
                        terminalContent.appendChild(successLine);
                        
                        // æ»šåŠ¨åˆ°åº•éƒ¨
                        setTimeout(() => {
                            terminalContent.scrollTop = terminalContent.scrollHeight;
                        }, 10);
                    }, 500);
                }
            }, 115); // 5ç§’å®Œæˆ (100 * 50ms = 5000ms)
        }
        
        // DOSSåŠ©æ‰‹åŠŸèƒ½
        const dossTerminal = document.getElementById('doss-terminal-content');
        
        // å¯åŠ¨DOSSåŠ©æ‰‹è¾“å‡º
        function startDossOutput() {
            // æ¸…é™¤ä¹‹å‰çš„è¾“å‡º
            dossTerminal.innerHTML = '<div class="doss-header">DOSS_ASSISTANT v2.1 - æ­£åœ¨è¿è¡Œ...</div>';
            
            // è®¾ç½®é—´éš”è¾“å‡º
            dossInterval = setInterval(() => {
                addDossOutput();
            }, 800); // æ¯800æ¯«ç§’è¾“å‡ºä¸€æ¬¡
        }
        
        // åœæ­¢DOSSåŠ©æ‰‹è¾“å‡º
        function stopDossOutput() {
            if (dossInterval) {
                clearInterval(dossInterval);
                dossInterval = null;
            }
        }
        
        // æ·»åŠ DOSSè¾“å‡º - ä¿®å¤æ»šåŠ¨é—®é¢˜
        function addDossOutput() {
            const codeLines = [
                "const randomMsg = messages[Math.floor(Math.random() * messages.length)];",
                "const msgLine = document.createElement('div');",
                "msgLine.className = 'terminal-line';",
                "msgLine.textContent = randomMsg;",
                "terminalContent.appendChild(msgLine);",
                "terminalContent.scrollTop = terminalContent.scrollHeight;",
                "function exploitVulnerability(target) {",
                "  const payload = generatePayload();",
                "  return executeAttack(target, payload);",
                "}",
                "const backdoor = createBackdoor('127.0.0.1');",
                "backdoor.listen(8080);",
                "const sensitiveData = extractData(targetSystem);",
                "encryptAndExfiltrate(sensitiveData);"
            ];
            
            // éšæœºé€‰æ‹©3-5è¡Œä»£ç è¾“å‡º
            const linesToShow = Math.floor(Math.random() * 3) + 3;
            for (let i = 0; i < linesToShow; i++) {
                const randomIndex = Math.floor(Math.random() * codeLines.length);
                const codeLine = document.createElement('div');
                codeLine.className = 'doss-line';
                codeLine.textContent = codeLines[randomIndex];
                dossTerminal.appendChild(codeLine);
            }
            
            // å¼ºåˆ¶æ»šåŠ¨åˆ°åº•éƒ¨
            setTimeout(() => {
                dossTerminal.scrollTop = dossTerminal.scrollHeight;
            }, 10);
            
            // éšæœºæ·»åŠ ä¸€äº›æ”»å‡»çŠ¶æ€æ¶ˆæ¯
            if (Math.random() > 0.7) {
                const statusMessages = [
                    "[INFO] Data packet sent successfully!",
                    "[WARN] Firewall activity detected",
                    "[DEBUG] Bypass security protocols",
                    "[ERROR] Connection timed out, retrying...",
                    "[SUCCESS] Successful exploitation of vulnerability!"
                ];
                const statusLine = document.createElement('div');
                statusLine.className = 'doss-line';
                statusLine.textContent = statusMessages[Math.floor(Math.random() * statusMessages.length)];
                dossTerminal.appendChild(statusLine);
                
                setTimeout(() => {
                    dossTerminal.scrollTop = dossTerminal.scrollHeight;
                }, 10);
            }
        }
        
        // åˆå§‹åŒ–ç»ˆç«¯
        initTerminal();
        
        // åˆå§‹æ‰“å¼€ç»ˆç«¯çª—å£
        setTimeout(() => {
            openWindow('terminal');
        }, 500);
    </script>
</body>
</html>